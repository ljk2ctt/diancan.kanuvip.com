<?phpnamespace Home\Controller;class LoginController extends CommonController {    public function index() {        layout(false);        if (IS_POST) {            $User = D("User");            if (!$data = $User->create(I('post.'), 4)) {                $this->error($User->getError(), U("index"));            } else {                //验证码                $verify = new \Think\Verify();                if (!$verify->check(I("verify"))) {                    $this->error('验证码错误', U("index"));                }                $user = $User->where(array("username" => $data["username"]))->find();                $mypwd = getencrypt($data['pwd'], $user['encrypt_key']);                if (!$user || $user['pwd'] != $mypwd) {                    $this->error('用户名或密码错误', U("index"));                }                unset($data);                //登录成功						                $data['id'] = $user['id'];                $data['logintime'] = NOW_TIME;                $User->save($data);                //存入session                session('syy_id', $user['id']);                session('store_id', $user['store_id']);                $this->redirect('Index/index');            }        }        $this->display();    }    public function verify() {        $Verify = new \Think\Verify(C('VERIFY_CONFIG'));        $Verify->entry();    }    public function logout() {        session('mid', null);        $path = session('path'); //授权目录        $key = array_search('shop', $path);        if ($key !== false)            array_splice($path, $key, 1);        session('path', $path); //授权目录        $this->redirect('Login/index');    }    public function test()    {        echo sprintf("%-14s%-6s%-6s%-6s\n",'要四个字','10.0','1','10.0');        echo sprintf("%14s%6s%6s%6s\n",'要四个字','10.0','1','10.0');            }    }